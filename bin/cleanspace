#!/usr/bin/env bash

RECURSE=

usage() {
  echo "Usage: ${0##*/} <targets>" >&2
}

while getopts rR opt; do
  case $opt in
    r|R) RECURSE=1 ;;
    *) usage; exit 1 ;;
  esac
done

shift $(( OPTIND - 1 ))

[[ -z $1 ]] && { usage; exit 1; }

IFS=$'\n' read -r -d'\0' -a files < <(find "$@" -type f ${RECURSE:+-maxdepth} ${RECURSE:+1})

sed -i 's/\t/  /g;s/ *$//' "${files[@]}"
